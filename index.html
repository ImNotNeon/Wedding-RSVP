<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wedding RSVP</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600&family=Tinos:wght@700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Raleway', sans-serif;
      background: #c3bdb5 url('Wedding.gif') no-repeat center bottom fixed;
      background-size: cover;
      text-align: center;
      padding: 30px;
      color: #4B2E2E;
    }
    h1, h2 {
      font-family: 'Tinos', serif;
      font-weight: 700;
      font-size: 2.5em;
      color: #4B2E2E;
    }
    h3 {
      font-family: 'Raleway', sans-serif;
      font-weight: 500;
      font-size: 1.8em;
      color: #4B2E2E;
    }
    h4 {
      font-family: 'Raleway', sans-serif;
      font-weight: 500;
      font-size: 1.5em;
      color: #4B2E2E;
    }
    .screen {
      margin: 20px auto;
      max-width: 420px;
      background: #d4d0c7;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 12px rgba(0,0,0,0.2);
      display: none;
    }
    input, button {
      width: 85%;
      padding: 10px;
      margin: 10px 0;
      font-family: 'Raleway', sans-serif;
      border-radius: 6px;
      border: 1px solid #c9b6b3;
    }
    button {
      background: #b5aba4;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #c9b6b3;
    }
    #thankYou, #sorryMessage { display: none; }

    /* Autocomplete dropdown */
    .autocomplete-suggestions {
      position: absolute;
      background: white;
      border: 1px solid #c9b6b3;
      border-radius: 6px;
      max-height: 150px;
      overflow-y: auto;
      width: 80%;
      margin: 0 auto;
      left: 0;
      right: 0;
      z-index: 10;
      display: none;
    }
    .autocomplete-suggestion {
      padding: 8px;
      cursor: pointer;
      text-align: left;
    }
    .autocomplete-suggestion:hover {
      background: #eee;
    }
    .highlight {
      font-weight: bold;
      color: #4B2E2E;
    }
  </style>
</head>
<body>

  <h1>RSVP for Our Wedding üíç</h1>

  <!-- Screen 1 -->
  <div id="selectScreen" class="screen" style="display:block;">
    <p>Will you be attending our wedding? üíç</p>
    <button onclick="startRSVP(true)">Yes</button>
    <button onclick="startRSVP(false)">No</button>
  </div>

  <!-- Name input screen -->
  <div id="nameScreen" class="screen">
    <p>Please enter your full name</p>
    <input type="text" id="guestNameInput" placeholder="Enter your name" autocomplete="off"/>
    <div id="autocomplete-list" class="autocomplete-suggestions"></div>
    <button onclick="checkName()">Continue</button>
  </div>

  <!-- Seat selection screen -->
  <div id="seatScreen" class="screen">
    <h2 id="seatMessage"></h2>
    <p>How many seats will you be occupying?</p>
    <input type="number" id="seatCountInput" min="1" />
    <button onclick="confirmSeats()">Confirm</button>
  </div>

  <!-- RSVP form -->
  <form id="rsvpForm" class="screen">
    <h2>Guest Names</h2>
    <div id="guestFields"></div>
    <button type="submit">Submit RSVP</button>
  </form>

  <!-- Thank you / decline -->
  <div id="thankYou" class="screen">
    <h3>Thank you! Your RSVP has been submitted.</h3>
    <h3>Your presence will make our day even more special! üéâ</h3>
  </div>
  <div id="sorryScreen" class="screen">
    <h4>Thank you for letting us know üíå</h4>
    <h4>We‚Äôll celebrate with you in spirit üíï</h4>
  </div>

<script>
const inviteList = {
  "MARIBEL CHUA": 4,
  "ANDREW CO": 5,
  "ELMER LIM": 3,
  "STANLEY LIM": 5
};

let maxGuests = 0;
let selectedName = "";

function startRSVP(answer) {
  document.getElementById('selectScreen').style.display = 'none';
  if (answer) {
    document.getElementById('nameScreen').style.display = 'block';
  } else {
    document.getElementById('sorryScreen').style.display = 'block';
  }
}

// Autocomplete logic
const input = document.getElementById("guestNameInput");
const suggestionBox = document.getElementById("autocomplete-list");

input.addEventListener("input", function() {
  const query = this.value.toUpperCase();
  suggestionBox.innerHTML = "";

  if (!query) {
    suggestionBox.style.display = "none";
    return;
  }

  const matches = Object.keys(inviteList).filter(name => name.includes(query));

  if (matches.length === 0) {
    suggestionBox.style.display = "none";
    return;
  }

  suggestionBox.style.display = "block";

  matches.forEach(match => {
    const div = document.createElement("div");
    div.classList.add("autocomplete-suggestion");
    div.innerHTML = match.replace(new RegExp(query, "gi"), 
      (m) => `<span class="highlight">${m}</span>`);
    div.onclick = function() {
      input.value = match;
      suggestionBox.innerHTML = "";
      suggestionBox.style.display = "none";
    };
    suggestionBox.appendChild(div);
  });
});

input.addEventListener("keydown", function(e) {
  if (e.key === "Escape") {
    suggestionBox.innerHTML = "";
    suggestionBox.style.display = "none";
  }
});

function checkName() {
  selectedName = input.value.trim().toUpperCase();
  if (inviteList[selectedName]) {
    maxGuests = inviteList[selectedName];
    document.getElementById('nameScreen').style.display = 'none';
    document.getElementById('seatScreen').style.display = 'block';
    document.getElementById('seatMessage').innerText = `We've reserved ${maxGuests} seats for you!`;
    document.getElementById('seatCountInput').setAttribute("max", maxGuests);
  } else {
    alert("Name not found. Please enter your name exactly as given on the invitation.");
  }
}

function confirmSeats() {
  const count = parseInt(document.getElementById('seatCountInput').value, 10);
  if (isNaN(count) || count < 1 || count > maxGuests) {
    alert(`Please enter a valid number between 1 and ${maxGuests}.`);
    return;
  }
  document.getElementById('seatScreen').style.display = 'none';
  document.getElementById('rsvpForm').style.display = 'block';
  createGuestFields(count);
}

function createGuestFields(n) {
  const container = document.getElementById('guestFields');
  container.innerHTML = "";
  for (let i = 1; i <= n; i++) {
    const input = document.createElement('input');
    input.type = "text";
    input.name = `guest${i}`;
    input.placeholder = `Guest ${i} (FirstName LastName)`;
    input.required = true;
    container.appendChild(input);
  }
}

// Form submission with name validation
document.getElementById("rsvpForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const guestInputs = document.querySelectorAll("#guestFields input");
  const namePattern = /^[A-Za-z]+ [A-Za-z]+$/; // First Last format

  for (let input of guestInputs) {
    if (!namePattern.test(input.value.trim())) {
      alert("Please enter names in the format: FirstName LastName (letters only).");
      return;
    }
  }

  document.getElementById("rsvpForm").style.display = "none";
  document.getElementById("thankYou").style.display = "block";
});
</script>

</body>
</html>
